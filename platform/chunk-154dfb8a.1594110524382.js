(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-154dfb8a"],{"10f1":function(e,t,a){"use strict";var s=a("e0f2"),n=a.n(s);n.a},a7b8:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"user-management"},[e.isShowMainPage?[a("div",{staticClass:"search"},[a("el-row",{staticClass:"header_Button"},[a("el-col",{attrs:{span:8,align:"left"}},[a("span",{staticClass:"srmSchLabel"},[e._v("搜索：")]),a("el-input",{staticStyle:{width:"200px","margin-right":"3px"},attrs:{placeholder:"请输入姓名/手机号搜索",clearable:"",size:"small"},on:{clear:e.handleFilter},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleFilter(t)}},model:{value:e.mobilePhone,callback:function(t){e.mobilePhone="string"===typeof t?t.trim():t},expression:"mobilePhone"}},[a("i",{staticClass:"el-input__icon el-icon-search",attrs:{slot:"prefix"},on:{click:e.handleFilter},slot:"prefix"})])],1),a("el-col",{attrs:{span:8}},[a("div",[a("el-button",{attrs:{size:"small",type:"primary",icon:"el-icon-search"},on:{click:e.handleFindList}},[e._v("查询 ")]),a("el-button",{attrs:{size:"small",icon:"el-icon-refresh"},on:{click:e.handleClear}},[e._v("重置")])],1)])],1)],1),a("div",{staticClass:"add-btn"},[1==e.type?a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.handleAdd}},[e._v("添加用户 ")]):e._e(),a("el-button",{attrs:{size:"small"},on:{click:e.handleFresh}},[e._v("刷新 ")])],1),a("Table",{attrs:{tableHead:e.tableHead,tableData:e.tableData,isShowOperation:1==e.type,isShowEditBtn:1==e.type,isShowDeleteBtn:1==e.type,currentPage:e.currentPage,total:e.total,currentSize:e.currentSize},on:{sizeChange:e.sizeChange,handleEdit:e.handleEdit,handleDelete:e.handleDelete,currentChange:e.currentChange}})]:[a("UserForm",{attrs:{userForm:e.userForm,isAdd:e.isAdd,isShowResetBtn:e.isShowResetBtn},on:{handleBack:e.handleBack,handleSave:e.handleSave}})]],2)},n=[],i=(a("d81d"),{name:"user-management",components:{Table:function(e){return a.e("chunk-412ae82e").then(function(){var t=[a("f4f7")];e.apply(null,t)}.bind(this)).catch(a.oe)},UserForm:function(e){return a.e("chunk-09017484").then(function(){var t=[a("7c0f")];e.apply(null,t)}.bind(this)).catch(a.oe)}},data:function(){return{isShowMainPage:!0,isShowResetBtn:!1,userForm:{name:"",mobilePhone:"",graphImage:"",code:"",password:"",departId:""},tableHead:[{fieldNo:"name",fieldName:"姓名",id:1},{fieldNo:"mobilePhone",fieldName:"手机号码",id:3},{fieldNo:"departName",fieldName:"部门",id:5},{fieldNo:"isEnable",fieldName:"允许访问系统",id:6},{fieldNo:"crtTime",fieldName:"创建时间",id:7}],tableData:[],currentPage:1,currentSize:10,total:0,type:this.$store.getters.type,mobilePhone:"",searchInfo:{page:1,length:10},isAdd:!0}},mounted:function(){this.getUserData(this.searchInfo)},methods:{sizeChange:function(e){this.currentSize=e,this.searchInfo.page=e,this.getUserData(this.searchInfo)},currentChange:function(e){this.currentPage=e,this.searchInfo.length=e,this.getUserData(this.searchInfo)},handleAdd:function(){this.isShowMainPage=!1,this.isShowResetBtn=!1,this.userForm={isEnable:!0,name:"",mobilePhone:"",graphImage:"",graphCode:"",password:"",departId:""},this.isAdd=!0},handleBack:function(){this.isShowMainPage=!0},handleEdit:function(e){this.userForm={},this.isShowResetBtn=!0,this.userForm=Object.assign({},e),this.userForm.isEnable="否"!=e.isEnable,this.isAdd=!1,this.isShowMainPage=!1},handleSave:function(){this.userForm.isEnable=1==this.userForm.isEnable?"1":"0",this.userForm.username=this.userForm.email;var e=this.userForm.id?"edit":"add";"add"==e?this.addUserFunc(this.userForm):this.updateUserFunc(this.userForm)},addUserFunc:function(e){var t=this;this.$api.post(this.$lesUiPath.enteruserAdd,e).then((function(e){if(0==e.code)return t.isShowMainPage=!0,t.getUserData(t.searchInfo),t.$message.success("添加成功")}))},updateUserFunc:function(e){var t=this;for(var a in e)""==e[a]&&delete e[a];this.$api.post(this.$lesUiPath.enteruserUpdate,e).then((function(e){if(0==e.code)return t.isShowMainPage=!0,t.getUserData(t.searchInfo),t.$message.success("修改成功")}))},getUserData:function(e,t){var a=this;e.isSuperAdmin="0",this.$api.post(this.$lesUiPath.enteruserFindUserList,e).then((function(e){0==e.code&&(a.tableData=e.data,a.tableData.map((function(e){e.isEnable=1==e.isEnable?"是":"否"})),a.total=a.tableData.length,1===t&&a.$message.success("操作成功"))}))},handleFilter:function(){this.searchInfo.mobilePhone=this.mobilePhone,this.getUserData(this.searchInfo)},handleFindList:function(){this.searchInfo.mobilePhone=this.mobilePhone,this.getUserData(this.searchInfo)},handleClear:function(){this.mobilePhone="",this.searchInfo.mobilePhone="",this.getUserData(this.searchInfo,1)},handleFresh:function(){this.getUserData(this.searchInfo,1)},handleDelete:function(e){var t=this;this.$confirm("此操作将永久删除, 是否继续?","提示",this.$global.confirmConfig).then((function(){t.$api.post(t.$lesUiPath.enteruserRemove,{id:e.id}).then((function(e){if(0==e.code)return t.getUserData(t.searchInfo),t.$message.success("删除成功")}))}))}}}),r=i,o=(a("10f1"),a("2877")),h=Object(o["a"])(r,s,n,!1,null,"38de060a",null);t["default"]=h.exports},e0f2:function(e,t,a){}}]);