(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-412463dc"],{"2cf0":function(a,i,t){"use strict";var e=t("3631"),s=t.n(e);s.a},3631:function(a,i,t){},"4af6":function(a,i,t){"use strict";t.r(i);var e=function(){var a=this,i=a.$createElement,t=a._self._c||i;return t("div",{staticClass:"admin-info"},[a._m(0),a.isShowMainPage?[t("div",{staticClass:"admin-num"},[a._v("管理员账号:"),t("span",[a._v(a._s(a.admindata.username))])]),t("div",{staticClass:"btns"},[t("el-button",{attrs:{type:"primary",icon:"el-icon-edit",size:"small"},on:{click:a.handleEdit}},[a._v("编辑管理员基本信息")]),t("el-button",{attrs:{type:"primary",icon:"el-icon-edit",size:"small"},on:{click:a.handlePassword}},[a._v("修改管理员密码")])],1)]:a._e(),a.isShowBasicInfo?[t("el-form",{ref:"ruleForm",staticClass:"admin-form",attrs:{model:a.adminForm,"hide-required-asterisk":"","label-width":"100px",size:"small",rules:a.rules1,"inline-message":""}},[t("el-form-item",{attrs:{label:"管理员账号",prop:"username"}},[t("el-input",{staticStyle:{width:"50%"},attrs:{disabled:""},model:{value:a.admindata.username,callback:function(i){a.$set(a.admindata,"username",i)},expression:"admindata.username"}})],1),t("el-form-item",{attrs:{label:"管理员邮箱",prop:"email"}},[t("el-input",{staticStyle:{width:"50%"},model:{value:a.admindata.email,callback:function(i){a.$set(a.admindata,"email",i)},expression:"admindata.email"}})],1)],1),t("div",{staticClass:"edit-btn",staticStyle:{"padding-left":"40px","margin-top":"30px"}},[t("el-button",{attrs:{size:"small"},on:{click:a.handleBack}},[a._v("返回 ")]),t("el-button",{attrs:{size:"small",type:"primary"},on:{click:a.handleSave}},[a._v("保存 ")])],1)]:a._e(),a.isShowPasswordInfo?[t("el-form",{ref:"ruleForm",staticClass:"admin-form",attrs:{model:a.adminPasswordForm,"hide-required-asterisk":"","label-width":"100px",size:"small",rules:a.rules2,"inline-message":""}},[t("el-form-item",{attrs:{label:"管理员手机",prop:"mobilePhone"}},[t("el-input",{staticStyle:{width:"30%"},model:{value:a.admindata.mobilePhone,callback:function(i){a.$set(a.admindata,"mobilePhone",i)},expression:"admindata.mobilePhone"}})],1),t("el-form-item",{attrs:{label:"验证码",prop:"code"}},[t("el-input",{staticStyle:{width:"30%"},model:{value:a.admindata.code,callback:function(i){a.$set(a.admindata,"code",i)},expression:"admindata.code"}},[t("template",{staticStyle:{color:"white","background-color":"#4A90E2","border-color":"#4A90E2"},slot:"append"},[t("el-button",{attrs:{size:"small",disabled:a.canClick,type:"primary"},on:{click:a.validCode}},[a._v(a._s(a.btnContent))])],1)],2)],1),t("el-form-item",{attrs:{label:"登陆密码",prop:"password"}},[t("el-input",{staticStyle:{width:"30%"},attrs:{type:"password"},model:{value:a.admindata.password,callback:function(i){a.$set(a.admindata,"password",i)},expression:"admindata.password"}})],1),t("el-form-item",{attrs:{label:"确认密码",prop:"checkPass"}},[t("el-input",{staticStyle:{width:"30%"},attrs:{type:"password"},model:{value:a.admindata.checkPass,callback:function(i){a.$set(a.admindata,"checkPass",i)},expression:"admindata.checkPass"}})],1)],1),t("div",{staticClass:"edit-btn",staticStyle:{"padding-left":"40px","margin-top":"30px"}},[t("el-button",{attrs:{size:"small"},on:{click:a.handlePBack}},[a._v("返回 ")]),t("el-button",{attrs:{size:"small",type:"primary"},on:{click:a.handlePSave}},[a._v("保存 ")])],1)]:a._e()],2)},s=[function(){var a=this,i=a.$createElement,t=a._self._c||i;return t("div",{staticClass:"warn-info"},[t("i",{staticClass:"el-icon-warning"}),t("span",[a._v(" 企业的管理员账号相关信息可以在这里进行修改，修改密码必须使用登记的管理员的手机号码验证；")])])}],n={name:"admin-info",components:{EditBtns:function(a){return t.e("chunk-15bc3c40").then(function(){var i=[t("371a")];a.apply(null,i)}.bind(this)).catch(t.oe)}},data:function(){var a=this,i=function(i,t,e){t?t!==a.adminForm.password?e(new Error("两次输入密码不一致!")):e():e(new Error("请再次输入密码"))};return{rules1:{username:[{required:!0,message:"请输入管理员账号",trigger:"blur"}],email:[{required:!0,message:"请输入管理员邮箱",trigger:"blur"},{type:"email",message:"请输入正确的邮箱地址",trigger:"blur"}]},rules2:{mobilePhone:[{required:!0,message:"请输入手机号码",trigger:"blur"}],password:[{required:!0,message:"请输入登录密码",trigger:"blur"}],checkPass:[{validator:i,trigger:"blur"}]},isShowMainPage:!0,isShowBasicInfo:!1,isShowPasswordInfo:!1,adminPasswordForm:{checkPass:""},admindata:{},btnContent:"获取验证码",canClick:!1,time:60,timer:"cloak"}},created:function(){this.getAdminInfo()},methods:{getAdminInfo:function(){var a=this,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.$api.post(this.$lesUiPath.adminInfo,i).then((function(i){if(0==i.code)a.admindata=i.data,a.adminForm=Object.assign({checkPass:""},i.data),a.adminPasswordForm=Object.assign({checkPass:""},i.data),a.adminPasswordForm["checkPass"]=i.data.password;else if(i.msg)return a.$message.error(i.msg)}))},handleEdit:function(){this.adminForm,this.isShowMainPage=!1,this.isShowPasswordInfo=!1,this.isShowBasicInfo=!0},handlePassword:function(){this.adminPasswordForm,this.isShowMainPage=!1,this.isShowPasswordInfo=!0,this.isShowBasicInfo=!1},handleBack:function(){this.getAdminInfo(),this.isShowMainPage=!0,this.isShowPasswordInfo=!1,this.isShowBasicInfo=!1},handlePBack:function(){this.getAdminInfo(),this.isShowMainPage=!0,this.isShowPasswordInfo=!1,this.isShowBasicInfo=!1},validCode:function(){if(!this.admindata.mobilePhone)return this.$message.warning("请先输入手机号码");var a={};a.phone=this.admindata.mobilePhone,this.canClick=!0,this.getTimeOut()},getTimeOut:function(){var a=this;this.cloak=setInterval((function(){a.time--,a.time>0?a.btnContent=a.time+"s后重新发送":a.time<=0&&(window.clearInterval(a.cloak),a.btnContent="重新发送",a.time=60,a.canClick=!1)}),1e3)},handleSave:function(){var a=this,i=this.validateFunc("ruleForm");if(i){var t={};t.email=this.adminForm.email,t.id=this.adminForm.id,console.log(t),console.log("this.adminForm.id = "+this.adminForm.id),console.log("this.adminForm.email = "+this.adminForm.email),this.$api.post(this.$lesUiPath.editAdminInfo,t).then((function(i){if(0!=i.code)return a.$message.error(i.msg);a.isShowMainPage=!0}))}},handlePSave:function(){var a=this.validateFunc("ruleForm");if(a){var i={};return i=Object.assign(this.adminPasswordForm),this.adminPasswordForm.checkPass=this.checkPass,void console.log(i)}},validateFunc:function(a){var i;return this.$refs[a].validate((function(a){return a?(i=!0,i):(i=!1,i)})),i}}},o=n,r=(t("2cf0"),t("2877")),l=Object(r["a"])(o,e,s,!1,null,"b98c949c",null);i["default"]=l.exports}}]);